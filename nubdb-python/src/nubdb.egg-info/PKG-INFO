Metadata-Version: 2.4
Name: nubdb
Version: 1.0.0
Summary: Python client for NubDB â€” a blazing-fast, AOF-based in-memory database written in Zig
Author: NubCoders
License: MIT
Project-URL: Homepage, https://github.com/nub-coders/nubdt
Project-URL: Documentation, https://nub-coders.github.io/nubdt/
Project-URL: Repository, https://github.com/nub-coders/nubdt
Project-URL: Issues, https://github.com/nub-coders/nubdt/issues
Keywords: nubdb,database,in-memory,key-value,cache,high-performance,zig
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Database
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Dynamic: license-file

# NubDB Python Client

> ðŸš€ Python client for **[NubDB](https://github.com/nub-coders/nubdt)** â€” a blazing-fast, AOF-based in-memory database written in Zig.

[![PyPI version](https://img.shields.io/pypi/v/nubdb)](https://pypi.org/project/nubdb/)
[![Python](https://img.shields.io/pypi/pyversions/nubdb)](https://pypi.org/project/nubdb/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## Installation

```bash
pip install nubdb
```

## Quick Start

Make sure your NubDB server is running (default: `localhost:6379`), then:

```python
from nubdb import NubDB

# Connect to NubDB
db = NubDB()

# Set and get values
db.set("name", "Alice")
print(db.get("name"))  # â†’ Alice

# Use TTL (auto-expire in 60 seconds)
db.set("session", "abc123", ttl=60)

# Counters
db.set("views", 0)
db.incr("views")  # â†’ 1
db.incr("views")  # â†’ 2
db.decr("views")  # â†’ 1

# Check existence
db.exists("name")  # â†’ True
db.exists("nope")  # â†’ False

# Database size
db.size()  # â†’ 3

# Delete keys
db.delete("name")

# Close when done
db.close()
```

## Context Manager

```python
from nubdb import NubDB

with NubDB() as db:
    db.set("key", "value")
    print(db.get("key"))
# Connection automatically closed
```

## Configuration

```python
from nubdb import NubDB

# Custom host and port
db = NubDB(host="db.nubcoder.com", port=6379)

# With timeout and retry settings
db = NubDB(
    host="localhost",
    port=6379,
    timeout=10.0,          # Socket timeout (seconds)
    auto_reconnect=True,   # Auto-reconnect on connection loss
    max_retries=5,         # Max reconnection attempts
)
```

### Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `NUBDB_HOST` | `localhost` | Server hostname |
| `NUBDB_PORT` | `6379` | Server port |

```bash
export NUBDB_HOST=db.nubcoder.com
export NUBDB_PORT=6379
```

## API Reference

### Connection

| Method | Description |
|--------|-------------|
| `NubDB(host, port, ...)` | Create client and connect |
| `db.connect()` | Reconnect to server |
| `db.close()` | Close connection |
| `db.ping()` | Check server is reachable |
| `db.connected` | Connection status (property) |

### Commands

| Method | Returns | Description |
|--------|---------|-------------|
| `db.set(key, value, ttl=None)` | `bool` | Set a key-value pair |
| `db.get(key)` | `str \| None` | Get value by key |
| `db.delete(key)` | `bool` | Delete a key |
| `db.exists(key)` | `bool` | Check if key exists |
| `db.incr(key)` | `int` | Increment integer value |
| `db.decr(key)` | `int` | Decrement integer value |
| `db.size()` | `int` | Get number of keys |
| `db.clear()` | `bool` | Delete all keys |

### Bulk Operations

| Method | Returns | Description |
|--------|---------|-------------|
| `db.mset({"k1": "v1", ...})` | `bool` | Set multiple key-value pairs |
| `db.mget("k1", "k2", ...)` | `dict` | Get multiple keys at once |

## Error Handling

```python
from nubdb import NubDB, ConnectionError, TimeoutError, CommandError

try:
    db = NubDB()
    db.set("key", "value")
except ConnectionError:
    print("Could not connect to NubDB server")
except TimeoutError:
    print("Command timed out")
except CommandError as e:
    print(f"Command failed: {e}")
```

## Requirements

- **Python 3.8+**
- **Running NubDB server** ([setup guide](https://github.com/nub-coders/nubdt))
- **Zero dependencies** â€” uses only Python standard library

## NubDB Server

NubDB is a high-performance, AOF-based in-memory database written in Zig:

- **100k+ ops/sec** throughput
- **<5Âµs** SET latency, **<1Âµs** GET latency
- **AOF persistence** with background compaction
- **Docker & Kubernetes** ready

```bash
# Start NubDB server with Docker
docker run -d -p 6379:6379 nubdb:latest

# Or build from source
git clone https://github.com/nub-coders/nubdt.git
cd nubdt && make server
```

## License

MIT License â€” see [LICENSE](LICENSE) for details.
